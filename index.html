<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waste Collection Efficiency Dashboard - CIT</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-dark: rgb(11, 43, 81);
            --primary-dark-light: rgb(20, 60, 105);
            --white: rgb(255, 255, 255);
            --bg-light: rgb(248, 250, 252);
            --bg-gray: rgb(241, 245, 249);
            --green: rgb(54, 155, 49);
            --green-light: rgb(220, 252, 218);
            --text-dark: rgb(16, 24, 40);
            --text-secondary: rgb(71, 84, 103);
            --text-muted: rgb(152, 162, 179);
            --red: rgb(224, 60, 57);
            --red-light: rgb(251, 230, 230);
            --amber: rgb(245, 158, 11);
            --amber-light: rgb(254, 243, 199);
            --blue: rgb(59, 130, 246);
            --blue-light: rgb(219, 234, 254);
            --border: rgb(228, 231, 236);
            --border-light: rgb(241, 243, 245);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--primary-dark);
            color: var(--text-dark);
            min-height: 100vh;
            font-size: 14px;
            line-height: 1.5;
        }

        .dashboard { max-width: 1600px; margin: 0 auto; padding: 24px; }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding: 20px 24px;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .header-left h1 {
            font-size: 22px;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 4px;
        }

        .header-left p { color: var(--text-secondary); font-size: 13px; }

        .date-range {
            background: var(--bg-gray);
            padding: 10px 16px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            color: var(--primary-dark);
            border: 1px solid var(--border);
        }

        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 16px;
            margin-bottom: 24px;
        }

        .kpi-card {
            background: var(--white);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
        }

        .kpi-card:hover { 
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .kpi-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
            font-size: 18px;
        }

        .kpi-icon.green { background: var(--green-light); color: var(--green); }
        .kpi-icon.blue { background: var(--blue-light); color: var(--blue); }
        .kpi-icon.amber { background: var(--amber-light); color: var(--amber); }
        .kpi-icon.primary { background: rgba(11, 43, 81, 0.1); color: var(--primary-dark); }

        .kpi-label {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.3px;
            margin-bottom: 6px;
        }

        .kpi-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 4px;
        }

        .kpi-sub { font-size: 12px; color: var(--text-secondary); }

        .grid-2x2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .chart-card {
            background: var(--white);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title { 
            font-size: 15px; 
            font-weight: 600; 
            color: var(--text-dark); 
        }

        .chart-subtitle { 
            font-size: 12px; 
            color: var(--text-muted); 
            margin-top: 2px; 
        }

        .chart-container { position: relative; height: 280px; }
        .full-width { grid-column: 1 / -1; }

        .filter-select {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--text-dark);
            font-size: 13px;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            min-width: 220px;
            transition: border-color 0.2s;
        }

        .filter-select:focus { 
            outline: none; 
            border-color: var(--primary-dark);
            box-shadow: 0 0 0 3px rgba(11, 43, 81, 0.1);
        }

        .table-container { 
            overflow-x: auto; 
            max-height: 600px; 
            overflow-y: auto;
            border-radius: 8px;
            border: 1px solid var(--border-light);
        }

        table { width: 100%; border-collapse: collapse; font-size: 13px; }

        th {
            text-align: left;
            padding: 12px 16px;
            background: var(--bg-gray);
            color: var(--text-secondary);
            font-weight: 600;
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            position: sticky;
            top: 0;
            z-index: 10;
            border-bottom: 1px solid var(--border);
        }

        td {
            padding: 12px 16px;
            border-bottom: 1px solid var(--border-light);
            color: var(--text-dark);
        }

        tr:hover td { background: var(--bg-light); }
        tr:last-child td { border-bottom: none; }

        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 10px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-excellent { background: var(--green-light); color: var(--green); }
        .status-good { background: var(--blue-light); color: var(--blue); }
        .status-warning { background: var(--amber-light); color: var(--amber); }
        .status-critical { background: var(--red-light); color: var(--red); }

        .zone-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .zone-card {
            background: var(--bg-light);
            border-radius: 10px;
            padding: 16px;
            text-align: center;
            border: 1px solid var(--border);
            transition: all 0.2s ease;
        }

        .zone-card:hover { 
            border-color: var(--primary-dark);
            box-shadow: 0 2px 8px rgba(11, 43, 81, 0.1);
        }

        .zone-name { 
            font-size: 12px; 
            font-weight: 600; 
            margin-bottom: 8px; 
            color: var(--text-dark); 
        }

        .zone-rate { 
            font-size: 22px; 
            font-weight: 700; 
            margin-bottom: 4px; 
        }

        .zone-tasks { font-size: 11px; color: var(--text-muted); }

        .explanation-panel {
            background: var(--white);
            border-radius: 12px;
            padding: 24px;
            margin-top: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .explanation-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .explanation-section {
            background: var(--bg-light);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid var(--border-light);
        }

        .explanation-section h4 {
            font-size: 13px;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-dark);
            display: inline-block;
        }

        .explanation-section p {
            font-size: 13px;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .explanation-section ul {
            list-style: none;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .explanation-section li {
            padding: 4px 0;
            padding-left: 16px;
            position: relative;
        }

        .explanation-section li::before {
            content: '‚Ä¢';
            position: absolute;
            left: 0;
            color: var(--green);
            font-weight: bold;
        }

        .route-list {
            max-height: 280px;
            overflow-y: auto;
            font-size: 11px;
        }

        .route-list-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4px 24px;
        }

        .insights-panel {
            background: var(--white);
            border-radius: 12px;
            padding: 24px;
            margin-top: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }

        .insight-item {
            padding: 16px;
            background: var(--bg-light);
            border-radius: 10px;
            border-left: 4px solid;
        }

        .insight-item.positive { border-color: var(--green); }
        .insight-item.warning { border-color: var(--amber); }
        .insight-item.negative { border-color: var(--red); }

        .insight-title {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            font-weight: 600;
            color: var(--text-muted);
            margin-bottom: 8px;
        }

        .insight-text { 
            font-size: 13px; 
            color: var(--text-dark); 
            line-height: 1.5; 
        }

        .mono { font-feature-settings: 'tnum'; }

        .text-green { color: var(--green); }
        .text-red { color: var(--red); }
        .text-amber { color: var(--amber); }

        @media (max-width: 1400px) {
            .kpi-grid { grid-template-columns: repeat(3, 1fr); }
        }

        @media (max-width: 1200px) {
            .kpi-grid { grid-template-columns: repeat(3, 1fr); }
            .grid-2x2 { grid-template-columns: 1fr; }
            .zone-grid { grid-template-columns: repeat(4, 1fr); }
            .insights-grid { grid-template-columns: 1fr; }
            .explanation-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 768px) {
            .kpi-grid { grid-template-columns: repeat(2, 1fr); }
            .zone-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <header class="header">
            <div class="header-left">
                <h1>Waste Collection Efficiency</h1>
                <p>CIT Operations Dashboard</p>
            </div>
            <div class="date-range">05 Jan 2026 ‚Äî 11 Jan 2026</div>
        </header>

        <div class="kpi-grid">
            <div class="kpi-card">
                <div class="kpi-icon green">‚úì</div>
                <div class="kpi-label">Completion Rate</div>
                <div class="kpi-value">91.1%</div>
                <div class="kpi-sub">20,600 of 22,606 tasks done</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon primary">üì¶</div>
                <div class="kpi-label">Total Collections</div>
                <div class="kpi-value">20,603</div>
                <div class="kpi-sub">Bins collected this week</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon blue">üìã</div>
                <div class="kpi-label">Task Breakdown</div>
                <div class="kpi-value">22,606</div>
                <div class="kpi-sub">20,087 Planned ¬∑ 2,519 Ad Hoc</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon primary">üõ£Ô∏è</div>
                <div class="kpi-label">Active Routes</div>
                <div class="kpi-value">33</div>
                <div class="kpi-sub">7 operational areas</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon amber">‚è≥</div>
                <div class="kpi-label">Pending Tasks</div>
                <div class="kpi-value">2,006</div>
                <div class="kpi-sub">1,408 To Do ¬∑ 598 Visited</div>
            </div>
            <div class="kpi-card">
                <div class="kpi-icon green">üöõ</div>
                <div class="kpi-label">Fleet Vehicles</div>
                <div class="kpi-value">10</div>
                <div class="kpi-sub">All operational</div>
            </div>
        </div>

        <div class="grid-2x2">
            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Daily Task Completion by Status</div>
                        <div class="chart-subtitle">Done, Visited, and To Do breakdown per day</div>
                    </div>
                    <select class="filter-select" id="routeFilter">
                        <option value="all">All Routes</option>
                        <option value="Sharma-ALD-Aldrees">Sharma-ALD-Aldrees</option>
                        <option value="Zone 1 (Day) - V 2.0">Zone 1 (Day) - V 2.0</option>
                        <option value="Zone 1 (Day) - V 2.0 (Friday)">Zone 1 (Day) - V 2.0 (Friday)</option>
                        <option value="Zone 1 (Night-1) - V 2.0">Zone 1 (Night-1) - V 2.0</option>
                        <option value="Zone 1 (Night-1) - V 2.0 (Friday)">Zone 1 (Night-1) - V 2.0 (Friday)</option>
                        <option value="Zone 1 (Night-2) - V 2.0">Zone 1 (Night-2) - V 2.0</option>
                        <option value="Zone 2 - A (Residence) - V 2.0">Zone 2 - A (Residence) - V 2.0</option>
                        <option value="Zone 2 - A (Residence) - V 2.0 (Friday)">Zone 2 - A (Residence) - V 2.0 (Friday)</option>
                        <option value="Zone 2 A (Day) - V 2.0">Zone 2 A (Day) - V 2.0</option>
                        <option value="Zone 2 A (Friday) V 2.0">Zone 2 A (Friday) V 2.0</option>
                        <option value="Zone 2 A (Night-1) - V 2.0">Zone 2 A (Night-1) - V 2.0</option>
                        <option value="Zone 2 A (Night-2) - V 2.0">Zone 2 A (Night-2) - V 2.0</option>
                        <option value="Zone 2 B (Day) - V 2.0">Zone 2 B (Day) - V 2.0</option>
                        <option value="Zone 2 B (Friday) V 2.0">Zone 2 B (Friday) V 2.0</option>
                        <option value="Zone 2 B (Magna) - V 2.0">Zone 2 B (Magna) - V 2.0</option>
                        <option value="Zone 2 B (Night-1) - V 2.0">Zone 2 B (Night-1) - V 2.0</option>
                        <option value="Zone 2 B (Night-2) - V 2.0">Zone 2 B (Night-2) - V 2.0</option>
                        <option value="Zone 2 C (Day) - V 2.0">Zone 2 C (Day) - V 2.0</option>
                        <option value="Zone 2 C (Friday) V 2.0">Zone 2 C (Friday) V 2.0</option>
                        <option value="Zone 2 C (Night-1) - V 2.0">Zone 2 C (Night-1) - V 2.0</option>
                        <option value="Zone 2 C (Night-2) - V 2.0">Zone 2 C (Night-2) - V 2.0</option>
                        <option value="Zone 3 (AlQan) - V 2.0">Zone 3 (AlQan) - V 2.0</option>
                        <option value="Zone 3 (Haqal & Jadeed) - V 2.0">Zone 3 (Haqal & Jadeed) - V 2.0</option>
                        <option value="Zone 3 (Zyath & Highway) - V 2.0">Zone 3 (Zyath & Highway) - V 2.0</option>
                        <option value="Zone 3 (Zyath Village) - V 2.0">Zone 3 (Zyath Village) - V 2.0</option>
                        <option value="Zone 4 - AlSuru - V 2.0">Zone 4 - AlSuru - V 2.0</option>
                        <option value="Zone 4 - Bajdah - V 2.0">Zone 4 - Bajdah - V 2.0</option>
                        <option value="Zone 4 - Bajdah (Friday) V 2.0">Zone 4 - Bajdah (Friday) V 2.0</option>
                        <option value="Zone 4 - Nima V 2.0">Zone 4 - Nima V 2.0</option>
                        <option value="Zone 5 - Shigri (Friday) V 2.0">Zone 5 - Shigri (Friday) V 2.0</option>
                        <option value="Zone 5 (Shigri Village - Left) - V 2.0">Zone 5 (Shigri Village - Left) - V 2.0</option>
                        <option value="Zone 5 (Shigri Village - Right) - V 2.0">Zone 5 (Shigri Village - Right) - V 2.0</option>
                        <option value="Zone 6 (Village B) - V 2.0">Zone 6 (Village B) - V 2.0</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="dailyChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Vehicle Performance</div>
                        <div class="chart-subtitle">Completion rate by vehicle</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="vehicleChart"></canvas>
                </div>
            </div>
        </div>

        <div class="chart-card">
            <div class="chart-header">
                <div>
                    <div class="chart-title">Operational Area Performance</div>
                    <div class="chart-subtitle">Completion rates across all areas (6 zones + Sharma-ALD)</div>
                </div>
            </div>
            <div class="zone-grid">
                <div class="zone-card">
                    <div class="zone-name">Zone 1</div>
                    <div class="zone-rate text-green">96.2%</div>
                    <div class="zone-tasks">1,813 / 1,885 tasks</div>
                </div>
                <div class="zone-card">
                    <div class="zone-name">Zone 2</div>
                    <div class="zone-rate text-green">93.2%</div>
                    <div class="zone-tasks">14,762 / 15,845 tasks</div>
                </div>
                <div class="zone-card">
                    <div class="zone-name">Zone 3</div>
                    <div class="zone-rate text-red">76.0%</div>
                    <div class="zone-tasks">974 / 1,281 tasks</div>
                </div>
                <div class="zone-card">
                    <div class="zone-name">Zone 4</div>
                    <div class="zone-rate text-red">74.4%</div>
                    <div class="zone-tasks">882 / 1,185 tasks</div>
                </div>
                <div class="zone-card">
                    <div class="zone-name">Zone 5</div>
                    <div class="zone-rate text-amber">87.6%</div>
                    <div class="zone-tasks">830 / 947 tasks</div>
                </div>
                <div class="zone-card">
                    <div class="zone-name">Zone 6</div>
                    <div class="zone-rate text-amber">88.8%</div>
                    <div class="zone-tasks">839 / 945 tasks</div>
                </div>
                <div class="zone-card">
                    <div class="zone-name">Sharma-ALD</div>
                    <div class="zone-rate text-green">96.5%</div>
                    <div class="zone-tasks">500 / 518 tasks</div>
                </div>
            </div>
        </div>

        <div class="grid-2x2" style="margin-top: 20px;">
            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Task Status Distribution</div>
                        <div class="chart-subtitle">Breakdown by completion status</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="statusChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Day of Week Performance</div>
                        <div class="chart-subtitle">Completion rate by weekday</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="dowChart"></canvas>
                </div>
            </div>
        </div>

        <div class="chart-card full-width" style="margin-top: 20px;">
            <div class="chart-header">
                <div>
                    <div class="chart-title">All Routes Performance (33 Routes)</div>
                    <div class="chart-subtitle">Complete ranking of all operational routes</div>
                </div>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Route Name</th>
                            <th>Total</th>
                            <th>Done</th>
                            <th>Visited</th>
                            <th>To Do</th>
                            <th>Rate</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>1</td><td>Zone 1 (Night-1) - V 2.0</td><td class="mono">300</td><td class="mono">300</td><td class="mono">0</td><td class="mono">0</td><td class="mono">100.0%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>2</td><td>Zone 1 (Night-2) - V 2.0</td><td class="mono">337</td><td class="mono">336</td><td class="mono">1</td><td class="mono">0</td><td class="mono">99.7%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>3</td><td>Zone 2 C (Day) - V 2.0</td><td class="mono">2,092</td><td class="mono">2,050</td><td class="mono">1</td><td class="mono">41</td><td class="mono">98.0%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>4</td><td>Zone 2 B (Night-2) - V 2.0</td><td class="mono">649</td><td class="mono">635</td><td class="mono">0</td><td class="mono">14</td><td class="mono">97.8%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>5</td><td>Zone 1 (Day) - V 2.0 (Friday)</td><td class="mono">133</td><td class="mono">130</td><td class="mono">3</td><td class="mono">0</td><td class="mono">97.7%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>6</td><td>Zone 2 A (Night-2) - V 2.0</td><td class="mono">914</td><td class="mono">886</td><td class="mono">28</td><td class="mono">0</td><td class="mono">96.9%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>7</td><td>Sharma-ALD-Aldrees</td><td class="mono">518</td><td class="mono">500</td><td class="mono">0</td><td class="mono">18</td><td class="mono">96.5%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>8</td><td>Zone 2 A (Friday) V 2.0</td><td class="mono">749</td><td class="mono">721</td><td class="mono">22</td><td class="mono">6</td><td class="mono">96.3%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>9</td><td>Zone 2 B (Magna) - V 2.0</td><td class="mono">96</td><td class="mono">92</td><td class="mono">4</td><td class="mono">0</td><td class="mono">95.8%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>10</td><td>Zone 2 A (Night-1) - V 2.0</td><td class="mono">1,207</td><td class="mono">1,154</td><td class="mono">53</td><td class="mono">0</td><td class="mono">95.6%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>11</td><td>Zone 2 C (Friday) V 2.0</td><td class="mono">867</td><td class="mono">820</td><td class="mono">0</td><td class="mono">47</td><td class="mono">94.6%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>12</td><td>Zone 2 B (Friday) V 2.0</td><td class="mono">602</td><td class="mono">568</td><td class="mono">4</td><td class="mono">30</td><td class="mono">94.4%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>13</td><td>Zone 1 (Day) - V 2.0</td><td class="mono">1,031</td><td class="mono">972</td><td class="mono">59</td><td class="mono">0</td><td class="mono">94.3%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>14</td><td>Zone 2 A (Day) - V 2.0</td><td class="mono">1,938</td><td class="mono">1,827</td><td class="mono">74</td><td class="mono">37</td><td class="mono">94.3%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>15</td><td>Zone 3 (Haqal & Jadeed) - V 2.0</td><td class="mono">307</td><td class="mono">287</td><td class="mono">19</td><td class="mono">1</td><td class="mono">93.5%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>16</td><td>Zone 4 - Bajdah (Friday) V 2.0</td><td class="mono">87</td><td class="mono">81</td><td class="mono">6</td><td class="mono">0</td><td class="mono">93.1%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>17</td><td>Zone 2 C (Night-2) - V 2.0</td><td class="mono">1,319</td><td class="mono">1,216</td><td class="mono">0</td><td class="mono">103</td><td class="mono">92.2%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>18</td><td>Zone 2 B (Night-1) - V 2.0</td><td class="mono">1,485</td><td class="mono">1,368</td><td class="mono">34</td><td class="mono">83</td><td class="mono">92.1%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>19</td><td>Zone 2 - A (Residence) - V 2.0</td><td class="mono">477</td><td class="mono">439</td><td class="mono">37</td><td class="mono">1</td><td class="mono">92.0%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>20</td><td>Zone 3 (Zyath & Highway) - V 2.0</td><td class="mono">163</td><td class="mono">149</td><td class="mono">9</td><td class="mono">5</td><td class="mono">91.4%</td><td><span class="status-badge status-excellent">Excellent</span></td></tr>
                        <tr><td>21</td><td>Zone 2 - A (Residence) - V 2.0 (Friday)</td><td class="mono">78</td><td class="mono">70</td><td class="mono">6</td><td class="mono">2</td><td class="mono">89.7%</td><td><span class="status-badge status-good">Good</span></td></tr>
                        <tr><td>22</td><td>Zone 1 (Night-1) - V 2.0 (Friday)</td><td class="mono">84</td><td class="mono">75</td><td class="mono">0</td><td class="mono">9</td><td class="mono">89.3%</td><td><span class="status-badge status-good">Good</span></td></tr>
                        <tr><td>23</td><td>Zone 5 - Shigri (Friday) V 2.0</td><td class="mono">156</td><td class="mono">139</td><td class="mono">15</td><td class="mono">2</td><td class="mono">89.1%</td><td><span class="status-badge status-good">Good</span></td></tr>
                        <tr><td>24</td><td>Zone 6 (Village B) - V 2.0</td><td class="mono">945</td><td class="mono">839</td><td class="mono">12</td><td class="mono">94</td><td class="mono">88.8%</td><td><span class="status-badge status-good">Good</span></td></tr>
                        <tr><td>25</td><td>Zone 5 (Shigri Village - Right) - V 2.0</td><td class="mono">472</td><td class="mono">413</td><td class="mono">54</td><td class="mono">5</td><td class="mono">87.5%</td><td><span class="status-badge status-good">Good</span></td></tr>
                        <tr><td>26</td><td>Zone 5 (Shigri Village - Left) - V 2.0</td><td class="mono">319</td><td class="mono">278</td><td class="mono">39</td><td class="mono">2</td><td class="mono">87.1%</td><td><span class="status-badge status-good">Good</span></td></tr>
                        <tr><td>27</td><td>Zone 2 B (Day) - V 2.0</td><td class="mono">1,780</td><td class="mono">1,540</td><td class="mono">37</td><td class="mono">203</td><td class="mono">86.5%</td><td><span class="status-badge status-warning">Warning</span></td></tr>
                        <tr><td>28</td><td>Zone 2 C (Night-1) - V 2.0</td><td class="mono">1,592</td><td class="mono">1,376</td><td class="mono">0</td><td class="mono">216</td><td class="mono">86.4%</td><td><span class="status-badge status-warning">Warning</span></td></tr>
                        <tr><td>29</td><td>Zone 4 - Nima V 2.0</td><td class="mono">639</td><td class="mono">503</td><td class="mono">41</td><td class="mono">95</td><td class="mono">78.7%</td><td><span class="status-badge status-warning">Warning</span></td></tr>
                        <tr><td>30</td><td>Zone 3 (Zyath Village) - V 2.0</td><td class="mono">377</td><td class="mono">291</td><td class="mono">11</td><td class="mono">75</td><td class="mono">77.2%</td><td><span class="status-badge status-warning">Warning</span></td></tr>
                        <tr><td>31</td><td>Zone 4 - AlSuru - V 2.0</td><td class="mono">214</td><td class="mono">151</td><td class="mono">10</td><td class="mono">53</td><td class="mono">70.6%</td><td><span class="status-badge status-critical">Critical</span></td></tr>
                        <tr><td>32</td><td>Zone 4 - Bajdah - V 2.0</td><td class="mono">245</td><td class="mono">147</td><td class="mono">15</td><td class="mono">83</td><td class="mono">60.0%</td><td><span class="status-badge status-critical">Critical</span></td></tr>
                        <tr><td>33</td><td>Zone 3 (AlQan) - V 2.0</td><td class="mono">434</td><td class="mono">247</td><td class="mono">4</td><td class="mono">183</td><td class="mono">56.9%</td><td><span class="status-badge status-critical">Critical</span></td></tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="grid-2x2" style="margin-top: 20px;">
            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Vehicle Utilization Summary</div>
                        <div class="chart-subtitle">Weekly task allocation per vehicle</div>
                    </div>
                </div>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr><th>Vehicle</th><th>Total</th><th>Done</th><th>Collections</th><th>Rate</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>REL 6</strong></td><td class="mono">518</td><td class="mono">500</td><td class="mono">500</td><td><span class="status-badge status-excellent">96.5%</span></td></tr>
                            <tr><td><strong>REL 5</strong></td><td class="mono">4,808</td><td class="mono">4,588</td><td class="mono">4,589</td><td><span class="status-badge status-excellent">95.4%</span></td></tr>
                            <tr><td><strong>REL 9</strong></td><td class="mono">2,440</td><td class="mono">2,322</td><td class="mono">2,322</td><td><span class="status-badge status-excellent">95.2%</span></td></tr>
                            <tr><td><strong>REL 15</strong></td><td class="mono">4,726</td><td class="mono">4,443</td><td class="mono">4,443</td><td><span class="status-badge status-excellent">94.0%</span></td></tr>
                            <tr><td><strong>REL 1</strong></td><td class="mono">2,576</td><td class="mono">2,370</td><td class="mono">2,370</td><td><span class="status-badge status-excellent">92.0%</span></td></tr>
                            <tr><td><strong>REL 7</strong></td><td class="mono">3,180</td><td class="mono">2,852</td><td class="mono">2,852</td><td><span class="status-badge status-good">89.7%</span></td></tr>
                            <tr><td><strong>REL 11</strong></td><td class="mono">945</td><td class="mono">839</td><td class="mono">839</td><td><span class="status-badge status-good">88.8%</span></td></tr>
                            <tr><td><strong>REL 13</strong></td><td class="mono">947</td><td class="mono">830</td><td class="mono">831</td><td><span class="status-badge status-good">87.6%</span></td></tr>
                            <tr><td><strong>REL 14</strong></td><td class="mono">1,281</td><td class="mono">974</td><td class="mono">974</td><td><span class="status-badge status-warning">76.0%</span></td></tr>
                            <tr><td><strong>REL 12</strong></td><td class="mono">1,185</td><td class="mono">882</td><td class="mono">883</td><td><span class="status-badge status-critical">74.4%</span></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="chart-card">
                <div class="chart-header">
                    <div>
                        <div class="chart-title">Service Point Information</div>
                        <div class="chart-subtitle">From CIT_ServicePoints.xlsx</div>
                    </div>
                </div>
                <div style="padding: 16px 0;">
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div style="background: var(--bg-light); padding: 16px; border-radius: 10px; border: 1px solid var(--border-light);">
                            <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.3px;">Total Service Points</div>
                            <div style="font-size: 24px; font-weight: 700; color: var(--primary-dark);">3,415</div>
                            <div style="font-size: 12px; color: var(--text-secondary);">All Active</div>
                        </div>
                        <div style="background: var(--bg-light); padding: 16px; border-radius: 10px; border: 1px solid var(--border-light);">
                            <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.3px;">Service Point Types</div>
                            <div style="font-size: 13px; color: var(--text-dark); margin-top: 8px;">
                                <div>Default: <strong style="color: var(--primary-dark);">3,023</strong></div>
                                <div>Special Needs: <strong style="color: var(--primary-dark);">392</strong></div>
                            </div>
                        </div>
                        <div style="background: var(--bg-light); padding: 16px; border-radius: 10px; border: 1px solid var(--border-light);">
                            <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.3px;">Asset Types Collected</div>
                            <div style="font-size: 13px; color: var(--text-dark); margin-top: 8px;">
                                <div>1100L Bins</div>
                                <div>240L Bins</div>
                            </div>
                        </div>
                        <div style="background: var(--bg-light); padding: 16px; border-radius: 10px; border: 1px solid var(--border-light);">
                            <div style="font-size: 11px; color: var(--text-muted); margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.3px;">Operations Supported</div>
                            <div style="font-size: 13px; color: var(--text-dark); margin-top: 8px;">
                                <div>Waste Collection</div>
                                <div style="font-size: 11px; color: var(--text-muted);">(This dashboard)</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="insights-panel">
            <div class="chart-header">
                <div>
                    <div class="chart-title">Key Insights & Recommendations</div>
                    <div class="chart-subtitle">Actionable intelligence from this week's data</div>
                </div>
            </div>
            <div class="insights-grid">
                <div class="insight-item positive">
                    <div class="insight-title">Top Performers</div>
                    <div class="insight-text">Zone 1 (96.2%), Sharma-ALD (96.5%), and Zone 2 (93.2%) maintain excellent completion rates. Night shift routes consistently outperform day routes. REL 6 achieves highest vehicle efficiency at 96.5%.</div>
                </div>
                <div class="insight-item warning">
                    <div class="insight-title">Areas of Concern</div>
                    <div class="insight-text">Zone 3 AlQan (56.9%), Zone 4 Bajdah (60.0%), and Zone 4 AlSuru (70.6%) require immediate attention. Vehicles REL 12 (74.4%) and REL 14 (76.0%) are underperforming significantly.</div>
                </div>
                <div class="insight-item negative">
                    <div class="insight-title">Pending Backlog</div>
                    <div class="insight-text">2,006 incomplete tasks: 1,408 "To Do" (never visited) concentrated in Zone 2 C Night-1 (216), Zone 2 B Day (203), Zone 3 AlQan (183). 598 "Visited" but uncollected bins need follow-up.</div>
                </div>
            </div>
        </div>

        <div class="explanation-panel">
            <div class="chart-header">
                <div>
                    <div class="chart-title">Data Notes & Methodology</div>
                    <div class="chart-subtitle">Important information about this analysis</div>
                </div>
            </div>
            <div class="explanation-grid">
                <div class="explanation-section">
                    <h4>Data Scope</h4>
                    <p>This analysis includes <strong>all 22,606 tasks</strong> from the CIT_Tasks.xlsx file:</p>
                    <ul>
                        <li><strong>Planned tasks:</strong> 20,087 tasks (88.9%) ‚Äî Scheduled collections based on route planning</li>
                        <li><strong>Ad Hoc tasks:</strong> 2,519 tasks (11.1%) ‚Äî Unscheduled collections added during operations</li>
                        <li><strong>Analysis period:</strong> January 5‚Äì11, 2026 (7 days)</li>
                    </ul>
                </div>
                <div class="explanation-section">
                    <h4>Task Status Definitions</h4>
                    <p>Tasks are categorized into three completion statuses:</p>
                    <ul>
                        <li><strong>Done:</strong> Task completed successfully, bin collected (20,600 tasks / 91.1%)</li>
                        <li><strong>Visited:</strong> Service point was visited but collection was not completed (598 tasks / 2.6%)</li>
                        <li><strong>To Do:</strong> Task was scheduled but service point was never visited (1,408 tasks / 6.2%)</li>
                    </ul>
                </div>
                <div class="explanation-section">
                    <h4>Operational Areas</h4>
                    <p>The analysis covers 7 distinct operational areas with 33 active routes:</p>
                    <ul>
                        <li><strong>Zone 1:</strong> 5 routes ‚Äî Day, Night-1, Night-2, Day (Friday), Night-1 (Friday)</li>
                        <li><strong>Zone 2:</strong> 16 routes ‚Äî Sub-zones A, B, C with Day/Night/Friday/Residence shifts</li>
                        <li><strong>Zone 3:</strong> 4 routes ‚Äî AlQan, Zyath Village, Zyath & Highway, Haqal & Jadeed</li>
                        <li><strong>Zone 4:</strong> 4 routes ‚Äî Nima, Bajdah, Bajdah (Friday), AlSuru</li>
                        <li><strong>Zone 5:</strong> 3 routes ‚Äî Shigri Village Left/Right, Shigri (Friday)</li>
                        <li><strong>Zone 6:</strong> 1 route ‚Äî Village B</li>
                        <li><strong>Sharma-ALD:</strong> 1 route ‚Äî Independent area not part of numbered zones</li>
                    </ul>
                </div>
                <div class="explanation-section">
                    <h4>Route Naming Conventions</h4>
                    <p>Some routes have minor naming differences between the Static Tour file and Tasks file:</p>
                    <ul>
                        <li>"Sharma - ALD - Aldrees" (Static Tour) = "Sharma-ALD-Aldrees" (Tasks)</li>
                        <li>"Zone 4 - Nima - V 2.0" (Static Tour) = "Zone 4 - Nima V 2.0" (Tasks)</li>
                        <li>"Zone 5 (Shigri Village) - V 2.0" splits into Left/Right routes in Tasks</li>
                        <li>Some Friday routes vary in "(Friday)" vs "Friday" formatting</li>
                    </ul>
                </div>
                <div class="explanation-section">
                    <h4>All 33 Routes Included</h4>
                    <div class="route-list">
                        <div class="route-list-grid">
                            <div>1. Sharma-ALD-Aldrees</div>
                            <div>18. Zone 2 C (Day) - V 2.0</div>
                            <div>2. Zone 1 (Day) - V 2.0</div>
                            <div>19. Zone 2 C (Friday) V 2.0</div>
                            <div>3. Zone 1 (Day) - V 2.0 (Friday)</div>
                            <div>20. Zone 2 C (Night-1) - V 2.0</div>
                            <div>4. Zone 1 (Night-1) - V 2.0</div>
                            <div>21. Zone 2 C (Night-2) - V 2.0</div>
                            <div>5. Zone 1 (Night-1) - V 2.0 (Friday)</div>
                            <div>22. Zone 3 (AlQan) - V 2.0</div>
                            <div>6. Zone 1 (Night-2) - V 2.0</div>
                            <div>23. Zone 3 (Haqal & Jadeed) - V 2.0</div>
                            <div>7. Zone 2 - A (Residence) - V 2.0</div>
                            <div>24. Zone 3 (Zyath & Highway) - V 2.0</div>
                            <div>8. Zone 2 - A (Residence) (Friday)</div>
                            <div>25. Zone 3 (Zyath Village) - V 2.0</div>
                            <div>9. Zone 2 A (Day) - V 2.0</div>
                            <div>26. Zone 4 - AlSuru - V 2.0</div>
                            <div>10. Zone 2 A (Friday) V 2.0</div>
                            <div>27. Zone 4 - Bajdah - V 2.0</div>
                            <div>11. Zone 2 A (Night-1) - V 2.0</div>
                            <div>28. Zone 4 - Bajdah (Friday) V 2.0</div>
                            <div>12. Zone 2 A (Night-2) - V 2.0</div>
                            <div>29. Zone 4 - Nima V 2.0</div>
                            <div>13. Zone 2 B (Day) - V 2.0</div>
                            <div>30. Zone 5 - Shigri (Friday) V 2.0</div>
                            <div>14. Zone 2 B (Friday) V 2.0</div>
                            <div>31. Zone 5 (Shigri Village - Left)</div>
                            <div>15. Zone 2 B (Magna) - V 2.0</div>
                            <div>32. Zone 5 (Shigri Village - Right)</div>
                            <div>16. Zone 2 B (Night-1) - V 2.0</div>
                            <div>33. Zone 6 (Village B) - V 2.0</div>
                            <div>17. Zone 2 B (Night-2) - V 2.0</div>
                            <div></div>
                        </div>
                    </div>
                </div>
                <div class="explanation-section">
                    <h4>Performance Thresholds</h4>
                    <p>Routes and vehicles are categorized by completion rate:</p>
                    <ul>
                        <li><span class="status-badge status-excellent" style="font-size: 11px;">Excellent</span> ‚â• 90% completion rate</li>
                        <li><span class="status-badge status-good" style="font-size: 11px;">Good</span> 85‚Äì89.9% completion rate</li>
                        <li><span class="status-badge status-warning" style="font-size: 11px;">Warning</span> 75‚Äì84.9% completion rate</li>
                        <li><span class="status-badge status-critical" style="font-size: 11px;">Critical</span> &lt; 75% completion rate</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        Chart.defaults.color = 'rgb(71, 84, 103)';
        Chart.defaults.borderColor = 'rgb(228, 231, 236)';
        Chart.defaults.font.family = "'Inter', sans-serif";

        const dailyData = {
            "all": {"done": [2963, 3234, 3060, 2888, 2966, 2428, 3061], "visited": [82, 102, 88, 80, 65, 96, 85], "todo": [212, 116, 154, 239, 102, 273, 312]},
            "Sharma-ALD-Aldrees": {"done": [68, 73, 71, 68, 73, 73, 74], "visited": [0, 0, 0, 0, 0, 0, 0], "todo": [6, 1, 3, 6, 1, 1, 0]},
            "Zone 1 (Day) - V 2.0": {"done": [160, 153, 162, 165, 0, 165, 167], "visited": [13, 15, 9, 7, 0, 10, 5], "todo": [0, 0, 0, 0, 0, 0, 0]},
            "Zone 1 (Day) - V 2.0 (Friday)": {"done": [0, 0, 0, 0, 130, 0, 0], "visited": [0, 0, 0, 0, 3, 0, 0], "todo": [0, 0, 0, 0, 0, 0, 0]},
            "Zone 1 (Night-1) - V 2.0": {"done": [50, 50, 50, 50, 0, 50, 50], "visited": [0, 0, 0, 0, 0, 0, 0], "todo": [0, 0, 0, 0, 0, 0, 0]},
            "Zone 1 (Night-1) - V 2.0 (Friday)": {"done": [0, 0, 0, 0, 75, 0, 0], "visited": [0, 0, 0, 0, 0, 0, 0], "todo": [0, 0, 0, 0, 9, 0, 0]},
            "Zone 1 (Night-2) - V 2.0": {"done": [58, 55, 56, 55, 57, 0, 55], "visited": [1, 0, 0, 0, 0, 0, 0], "todo": [0, 0, 0, 0, 0, 0, 0]},
            "Zone 2 - A (Residence) - V 2.0": {"done": [73, 73, 74, 75, 0, 72, 72], "visited": [6, 5, 6, 5, 0, 7, 8], "todo": [0, 0, 0, 1, 0, 0, 0]},
            "Zone 2 - A (Residence) - V 2.0 (Friday)": {"done": [0, 0, 0, 0, 70, 0, 0], "visited": [0, 0, 0, 0, 6, 0, 0], "todo": [0, 0, 0, 0, 2, 0, 0]},
            "Zone 2 A (Day) - V 2.0": {"done": [306, 309, 295, 305, 0, 308, 304], "visited": [11, 10, 16, 12, 0, 13, 12], "todo": [5, 6, 6, 7, 0, 8, 5]},
            "Zone 2 A (Friday) V 2.0": {"done": [0, 0, 0, 0, 721, 0, 0], "visited": [0, 0, 0, 0, 22, 0, 0], "todo": [0, 0, 0, 0, 6, 0, 0]},
            "Zone 2 A (Night-1) - V 2.0": {"done": [193, 192, 193, 193, 0, 191, 192], "visited": [8, 9, 8, 8, 0, 11, 9], "todo": [0, 0, 0, 0, 0, 0, 0]},
            "Zone 2 A (Night-2) - V 2.0": {"done": [178, 176, 177, 179, 0, 0, 176], "visited": [5, 6, 6, 6, 0, 0, 5], "todo": [0, 0, 0, 0, 0, 0, 0]},
            "Zone 2 B (Day) - V 2.0": {"done": [0, 303, 347, 349, 0, 199, 342], "visited": [0, 3, 9, 9, 0, 4, 12], "todo": [0, 45, 0, 0, 0, 148, 10]},
            "Zone 2 B (Friday) V 2.0": {"done": [0, 0, 0, 0, 568, 0, 0], "visited": [0, 0, 0, 0, 4, 0, 0], "todo": [0, 0, 0, 0, 30, 0, 0]},
            "Zone 2 B (Magna) - V 2.0": {"done": [92, 0, 0, 0, 0, 0, 0], "visited": [4, 0, 0, 0, 0, 0, 0], "todo": [0, 0, 0, 0, 0, 0, 0]},
            "Zone 2 B (Night-1) - V 2.0": {"done": [221, 229, 236, 228, 0, 230, 224], "visited": [0, 7, 6, 7, 0, 7, 7], "todo": [0, 12, 16, 20, 0, 16, 19]},
            "Zone 2 B (Night-2) - V 2.0": {"done": [128, 126, 125, 127, 0, 0, 129], "visited": [0, 0, 0, 0, 0, 0, 0], "todo": [3, 1, 4, 3, 0, 0, 3]},
            "Zone 2 C (Day) - V 2.0": {"done": [332, 348, 335, 333, 0, 349, 353], "visited": [0, 0, 0, 0, 0, 0, 1], "todo": [6, 13, 10, 9, 0, 2, 1]},
            "Zone 2 C (Friday) V 2.0": {"done": [0, 0, 0, 0, 820, 0, 0], "visited": [0, 0, 0, 0, 0, 0, 0], "todo": [0, 0, 0, 0, 47, 0, 0]},
            "Zone 2 C (Night-1) - V 2.0": {"done": [235, 260, 260, 203, 0, 218, 200], "visited": [0, 0, 0, 0, 0, 0, 0], "todo": [34, 7, 7, 62, 0, 45, 61]},
            "Zone 2 C (Night-2) - V 2.0": {"done": [252, 247, 244, 225, 0, 0, 248], "visited": [0, 0, 0, 0, 0, 0, 0], "todo": [21, 18, 18, 29, 0, 0, 17]},
            "Zone 3 (AlQan) - V 2.0": {"done": [117, 0, 0, 130, 0, 0, 0], "visited": [1, 0, 0, 3, 0, 0, 0], "todo": [97, 0, 0, 86, 0, 0, 0]},
            "Zone 3 (Haqal & Jadeed) - V 2.0": {"done": [0, 143, 0, 0, 0, 144, 0], "visited": [0, 10, 0, 0, 0, 9, 0], "todo": [0, 0, 0, 0, 0, 1, 0]},
            "Zone 3 (Zyath & Highway) - V 2.0": {"done": [0, 0, 0, 0, 149, 0, 0], "visited": [0, 0, 0, 0, 9, 0, 0], "todo": [0, 0, 0, 0, 5, 0, 0]},
            "Zone 3 (Zyath Village) - V 2.0": {"done": [0, 0, 191, 0, 0, 0, 100], "visited": [0, 0, 9, 0, 0, 0, 2], "todo": [0, 0, 9, 0, 0, 0, 66]},
            "Zone 4 - AlSuru - V 2.0": {"done": [81, 0, 0, 0, 0, 70, 0], "visited": [5, 0, 0, 0, 0, 5, 0], "todo": [21, 0, 0, 0, 0, 32, 0]},
            "Zone 4 - Bajdah (Friday) V 2.0": {"done": [0, 0, 0, 0, 81, 0, 0], "visited": [0, 0, 0, 0, 6, 0, 0], "todo": [0, 0, 0, 0, 0, 0, 0]},
            "Zone 4 - Bajdah - V 2.0": {"done": [0, 77, 0, 70, 0, 0, 0], "visited": [0, 6, 0, 9, 0, 0, 0], "todo": [0, 3, 0, 4, 0, 0, 76]},
            "Zone 4 - Nima V 2.0": {"done": [114, 117, 0, 99, 0, 101, 72], "visited": [6, 6, 0, 14, 0, 11, 4], "todo": [5, 5, 0, 12, 0, 20, 53]},
            "Zone 5 - Shigri (Friday) V 2.0": {"done": [0, 0, 0, 0, 139, 0, 0], "visited": [0, 0, 0, 0, 15, 0, 0], "todo": [0, 0, 0, 0, 2, 0, 0]},
            "Zone 5 (Shigri Village - Left) - V 2.0": {"done": [0, 140, 0, 0, 0, 0, 138], "visited": [0, 19, 0, 0, 0, 0, 20], "todo": [0, 1, 0, 0, 0, 0, 1]},
            "Zone 5 (Shigri Village - Right) - V 2.0": {"done": [135, 0, 138, 0, 0, 140, 0], "visited": [17, 0, 18, 0, 0, 19, 0], "todo": [3, 0, 2, 0, 0, 0, 0]},
            "Zone 6 (Village B) - V 2.0": {"done": [170, 163, 106, 34, 83, 118, 165], "visited": [5, 6, 1, 0, 0, 0, 0], "todo": [11, 4, 79, 0, 0, 0, 0]}
        };

        let dailyChart;

        function createDailyChart(routeKey) {
            const data = dailyData[routeKey];
            const ctx = document.getElementById('dailyChart');
            
            if (dailyChart) dailyChart.destroy();

            dailyChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Jan 5', 'Jan 6', 'Jan 7', 'Jan 8', 'Jan 9', 'Jan 10', 'Jan 11'],
                    datasets: [
                        { label: 'Done', data: data.done, backgroundColor: 'rgb(54, 155, 49)', borderRadius: 4, barPercentage: 0.7 },
                        { label: 'Visited', data: data.visited, backgroundColor: 'rgb(245, 158, 11)', borderRadius: 4, barPercentage: 0.7 },
                        { label: 'To Do', data: data.todo, backgroundColor: 'rgb(203, 213, 225)', borderRadius: 4, barPercentage: 0.7 }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { position: 'top', align: 'end', labels: { boxWidth: 12, padding: 16, font: { size: 12 } } } },
                    scales: { 
                        x: { stacked: true, grid: { display: false } }, 
                        y: { stacked: true, grid: { color: 'rgb(241, 245, 249)' } } 
                    }
                }
            });
        }

        createDailyChart('all');
        document.getElementById('routeFilter').addEventListener('change', e => createDailyChart(e.target.value));

        new Chart(document.getElementById('vehicleChart'), {
            type: 'bar',
            data: {
                labels: ['REL 6', 'REL 5', 'REL 9', 'REL 15', 'REL 1', 'REL 7', 'REL 11', 'REL 13', 'REL 14', 'REL 12'],
                datasets: [{
                    label: 'Completion Rate %',
                    data: [96.5, 95.4, 95.2, 94.0, 92.0, 89.7, 88.8, 87.6, 76.0, 74.4],
                    backgroundColor: ctx => {
                        const v = ctx.raw;
                        if (v >= 90) return 'rgb(54, 155, 49)';
                        if (v >= 85) return 'rgb(59, 130, 246)';
                        if (v >= 75) return 'rgb(245, 158, 11)';
                        return 'rgb(224, 60, 57)';
                    },
                    borderRadius: 4,
                    barPercentage: 0.6
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { 
                    x: { min: 0, max: 100, grid: { color: 'rgb(241, 245, 249)' }, ticks: { callback: v => v + '%' } }, 
                    y: { grid: { display: false } } 
                }
            }
        });

        new Chart(document.getElementById('statusChart'), {
            type: 'doughnut',
            data: {
                labels: ['Done', 'To Do', 'Visited'],
                datasets: [{ 
                    data: [20600, 1408, 598], 
                    backgroundColor: ['rgb(54, 155, 49)', 'rgb(203, 213, 225)', 'rgb(245, 158, 11)'], 
                    borderWidth: 0, 
                    cutout: '70%' 
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { position: 'right', labels: { padding: 16, usePointStyle: true, pointStyle: 'circle', font: { size: 12 } } } }
            }
        });

        new Chart(document.getElementById('dowChart'), {
            type: 'line',
            data: {
                labels: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
                datasets: [{
                    label: 'Completion Rate',
                    data: [88.5, 91.0, 93.7, 92.7, 90.1, 94.7, 86.8],
                    borderColor: 'rgb(11, 43, 81)',
                    backgroundColor: 'rgba(11, 43, 81, 0.08)',
                    fill: true,
                    tension: 0.4,
                    pointBackgroundColor: 'rgb(11, 43, 81)',
                    pointBorderColor: 'rgb(255, 255, 255)',
                    pointBorderWidth: 2,
                    pointRadius: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: { 
                    x: { grid: { display: false } }, 
                    y: { min: 80, max: 100, grid: { color: 'rgb(241, 245, 249)' }, ticks: { callback: v => v + '%' } } 
                }
            }
        });
    </script>
</body>
</html>
